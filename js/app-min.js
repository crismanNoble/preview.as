$(document).ready(function(){function t(t){var a=$('.meta-tag[data-key="'+t+'"]'),e=!1;return a.length&&(e=a.attr("data-value")),e}function a(t){return t.indexOf("://")&&(t=t.split("://")[1]),t.split("/")[0]}function e(a){for(var e=!1,r=0;r<a.length;r++)e||(e=t(a[r]));return e}function r(t,a){var e=new Image;e.src=t,e.onload=function(){a(this.width,this.height)}}function i(){$(".slack").show(),$(".slack__card").hide(),$(".slack__page-title").html(""),$(".slack__domain-name").html(""),$(".slack__image").hide(),$(".slack__description").text(),$(".slack__link").text(""),$(".slack__image").css({backgroundImage:!1}),$(".slack__favicon img").hide(),$(".slack__favicon img").attr("src",""),$(".slack__card").show();var i=e(["og:title","title"]);$(".slack__page-title").html(i);var c=a(o=t("href"));$(".slack__domain-name").text(c);var _=e(["twitter:image","og:image"]);_&&($(".slack__image").show(),$(".slack__image").css({backgroundImage:"url("+_+")"}),r(_,function(t,a){t>500?$(".slack__card").addClass("slack__card--large"):$(".slack__card").addClass("slack__card--small")}));var o,l=e(["favicon"]);l&&($(".slack__favicon img").attr("src",l),$(".slack__favicon img").show()),(o=e(["og:url","canonical","href"]))&&$(".slack__link").text(a(o));var s=e(["og:description","description"]);s&&$(".slack__description").text(s)}function c(){$(".facebook__card").hide(),$(".facebook__title").html(""),$(".facebook__image").hide(),$(".facebook__description").text(),$(".facebook__link").text(""),$(".facebook__card").removeClass("facebook__card--large").removeClass("facebook__card--small"),$(".facebook__image").css({backgroundImage:!1}),$(".facebook").show(),$(".facebook__card").show();var t=e(["og:title","title"]);$(".facebook__title").html(t);var i=e(["twitter:image","og:image"]);i&&($(".facebook__image").show(),$(".facebook__image").css({backgroundImage:"url("+i+")"}),r(i,function(t,a){t>500?$(".facebook__card").addClass("facebook__card--large"):$(".facebook__card").addClass("facebook__card--small")}));var c=e(["og:url","canonical","href"]);c&&$(".facebook__link").text(a(c));var _=e(["og:description","description"]);_&&$(".facebook__description").text(_)}function _(){$(".twitter").show(),$(".twitter__card").hide(),$(".twitter__title").html(""),$(".twitter__image").hide(),$(".twitter__description").text(),$(".twitter__link span").text(""),$(".twitter__card").removeClass("twitter__card--large").removeClass("twitter__card--small"),$(".twitter__image").css({backgroundImage:!1}),$(".twitter__card").show();var t=e(["twitter:title","og:title","title"]);$(".twitter__title").html(t);var r=e(["twitter:card"]),i=e(["twitter:image","og:image"]);"summary_large_image"==r&&$(".twitter__card").addClass("twitter__card--large"),"summary"==r&&$(".twitter__card").addClass("twitter__card--small"),i&&($(".twitter__image").show(),$(".twitter__image").css({backgroundImage:"url("+i+")"}));var c=e(["canonical","href"]);c&&$(".twitter__link span").text(a(c));var _=e(["twitter:description","og:description","description"]);_&&$(".twitter__description").text(_)}$(".js-ajax").submit(function(t){t.preventDefault();var a="https://fetch-meta-tags.glitch.me/?url="+$("#url").val();$.get(a).then(function(t){$("#meta_raw").html("");var a=$(document.createElement("div")).addClass("meta-tag").text("feched url: "+t.final_url).attr("data-key","href").attr("data-value",t.final_url),e=$(document.createElement("div")).addClass("meta-tag").text("favicon: "+t.favicon).attr("data-key","favicon").attr("data-value",t.favicon);if($("#meta_raw").append(l),$("#meta_raw").append(a),$("#meta_raw").append(e),t.metas&&t.metas.length)for(var r=0;r<t.metas.length;r++){var o=t.metas[r],l=$(document.createElement("div")).addClass("meta-tag").text(o.raw).attr("data-key",o.key).attr("data-value",o.value);$("#meta_raw").append(l)}_(),c(),i(),$(".meta").show()})});var o=document.location.search.split("url=").length>1&&document.location.search.split("url=")[1];o&&($("#url").val(o),$("#url").parent().find(".js-submit").click())});