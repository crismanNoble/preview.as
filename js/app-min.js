$(document).ready(function(){function a(a){var t=$('.meta-tag[data-key="'+a+'"]'),e=!1;return t.length&&(e=t.attr("data-value")),e}function t(a){return a.indexOf("://")&&(a=a.split("://")[1]),a.split("/")[0]}function e(t){for(var e=!1,r=0;r<t.length;r++)e||(e=a(t[r]));return e}function r(a,t){var e=new Image;e.src=a,e.onload=function(){t(this.width,this.height)}}function i(){$(".slack").show(),$(".slack__card").hide(),$(".slack__page-title").html(""),$(".slack__domain-name").html(""),$(".slack__image").hide(),$(".slack__description").text(),$(".slack__link").text(""),$(".slack__image").css({backgroundImage:!1}),$(".slack__favicon img").hide(),$(".slack__favicon img").attr("src",""),$(".slack__card").show();var i=e(["og:title","title"]);$(".slack__page-title").html(i);var c=t(o=a("href"));$(".slack__domain-name").text(c);var _=e(["twitter:image","og:image"]);_&&($(".slack__image").show(),$(".slack__image").css({backgroundImage:"url("+_+")"}),r(_,function(a,t){a>500?$(".slack__card").addClass("slack__card--large"):$(".slack__card").addClass("slack__card--small")}));var o,l=e(["favicon"]);l&&($(".slack__favicon img").attr("src",l),$(".slack__favicon img").show()),(o=e(["og:url","canonical","href"]))&&$(".slack__link").text(t(o));var s=e(["og:description","description"]);s&&$(".slack__description").text(s)}function c(){$(".facebook__card").hide(),$(".facebook__title").html(""),$(".facebook__image").hide(),$(".facebook__description").text(),$(".facebook__link").text(""),$(".facebook__card").removeClass("facebook__card--large").removeClass("facebook__card--small"),$(".facebook__image").css({backgroundImage:!1}),$(".facebook").show(),$(".facebook__card").show();var a=e(["og:title","title"]);$(".facebook__title").html(a);var i=e(["twitter:image","og:image"]);i&&($(".facebook__image").show(),$(".facebook__image").css({backgroundImage:"url("+i+")"}),r(i,function(a,t){a>500?$(".facebook__card").addClass("facebook__card--large"):$(".facebook__card").addClass("facebook__card--small")}));var c=e(["og:url","canonical","href"]);c&&$(".facebook__link").text(t(c));var _=e(["og:description","description"]);_&&$(".facebook__description").text(_)}function _(){$(".twitter").show(),$(".twitter__card").hide(),$(".twitter__title").html(""),$(".twitter__image").hide(),$(".twitter__description").text(),$(".twitter__link span").text(""),$(".twitter__card").removeClass("twitter__card--large").removeClass("twitter__card--small"),$(".twitter__image").css({backgroundImage:!1}),$(".twitter__card").show();var a=e(["twitter:title","og:title","title"]);$(".twitter__title").html(a);var r=e(["twitter:card"]),i=e(["twitter:image","og:image"]);"summary_large_image"==r&&$(".twitter__card").addClass("twitter__card--large"),"summary"==r&&$(".twitter__card").addClass("twitter__card--small"),i&&($(".twitter__image").show(),$(".twitter__image").css({backgroundImage:"url("+i+")"}));var c=e(["canonical","href"]);c&&$(".twitter__link span").text(t(c));var _=e(["twitter:description","og:description","description"]);_&&$(".twitter__description").text(_)}$(".js-ajax").submit(function(a){a.preventDefault();var t="https://fetch-meta-tags.glitch.me/?url="+$("#url").val();$.get(t).then(function(a){$("#meta_raw").html("");var t=$(document.createElement("div")).addClass("meta-tag").text("feched url: "+a.final_url).attr("data-key","href").attr("data-value",a.final_url),e=$(document.createElement("div")).addClass("meta-tag").text("favicon: "+a.favicon).attr("data-key","favicon").attr("data-value",a.favicon);if($("#meta_raw").append(l),$("#meta_raw").append(t),$("#meta_raw").append(e),a.metas&&a.metas.length)for(var r=0;r<a.metas.length;r++){var o=a.metas[r],l=$(document.createElement("div")).addClass("meta-tag").text(o.raw).attr("data-key",o.key).attr("data-value",o.value);$("#meta_raw").append(l)}_(),c(),i(),$(".meta").show()})})});